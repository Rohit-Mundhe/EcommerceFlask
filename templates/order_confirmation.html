{% extends "base.html" %}
{% block title %}Order Confirmed â€“ ShopZone{% endblock %}
{% block content %}
<div class="container">

  <div class="confirm-banner">
    <div class="confirm-icon">âœ…</div>
    <h1>Order Placed Successfully!</h1>
    <p>Thank you, <strong>{{ order.shipping_name }}</strong>! Your order has been confirmed.</p>
    <p class="confirm-id">Order ID: <strong>#{{ order.id }}</strong></p>
  </div>

  <div class="confirm-layout">

    <!-- Order items -->
    <div class="confirm-items-col">
      <div class="form-card">
        <h2>ðŸ“¦ Items Ordered</h2>
        {% for item in items %}
        {% if item.products %}
        <div class="oi-row">
          <img src="{{ item.products.image_url or 'https://placehold.co/70x60?text=IMG' }}" class="oi-img"/>
          <div class="oi-info">
            <p class="oi-name">{{ item.products.name }}</p>
            <p class="oi-meta">Qty: {{ item.quantity }} &nbsp;Ã—&nbsp; â‚¹{{ "%.2f"|format(item.price or item.products.price) }}</p>
          </div>
          <div class="oi-sub">â‚¹{{ "%.2f"|format((item.price or item.products.price) * item.quantity) }}</div>
        </div>
        {% endif %}
        {% endfor %}
        <div class="os-divider"></div>
        <div class="os-row os-total">
          <span>Total Paid</span>
          <span>â‚¹{{ "%.2f"|format(order.total_amount or 0) }}</span>
        </div>
      </div>
    </div>

    <!-- Delivery & payment info -->
    <div class="confirm-info-col">
      <div class="summary-card">
        <h3>ðŸšš Delivery Address</h3>
        <p class="addr-line"><strong>{{ order.shipping_name }}</strong></p>
        <p class="addr-line">{{ order.shipping_address }}</p>
        <p class="addr-line">{{ order.shipping_city }}, {{ order.shipping_state }} â€“ {{ order.shipping_pincode }}</p>
        <p class="addr-line">ðŸ“ž {{ order.shipping_phone }}</p>
        {% if order.note %}
          <p class="addr-line" style="color:#888">Note: {{ order.note }}</p>
        {% endif %}
      </div>
      <div class="summary-card" style="margin-top:16px">
        <h3>ðŸ’³ Payment</h3>
        <p>{{ order.payment_method or 'Cash on Delivery' }}</p>
        <span class="badge-cod">Pay when delivered</span>
      </div>
      <div class="summary-card" style="margin-top:16px">
        <h3>ðŸ“… Estimated Delivery</h3>
        <p>3 â€“ 5 business days</p>
      </div>
      <div style="margin-top:20px;display:flex;gap:12px">
        <a href="{{ url_for('my_orders') }}" class="btn btn-primary">View All Orders</a>
        <a href="{{ url_for('home') }}" class="btn btn-outline">Continue Shopping</a>
      </div>
    </div>

  </div>
</div>
{% endblock %}
