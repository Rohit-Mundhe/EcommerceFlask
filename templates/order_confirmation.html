{% extends "base.html" %}
{% block title %}Order Confirmed – ShopZone{% endblock %}

{% block content %}
<div class="container py-5" style="max-width:640px">
  <div class="card border-0 shadow text-center">
    <div class="card-body p-4 p-md-5">

      <!-- Success icon -->
      <div class="mb-3">
        <div class="bg-success bg-opacity-10 rounded-circle d-inline-flex p-3 mb-2">
          <i class="bi bi-check-circle-fill text-success" style="font-size:3rem"></i>
        </div>
      </div>
      <h3 class="fw-bold mb-1">Order Placed Successfully!</h3>
      <p class="text-muted mb-4">
        Order <strong>#{{ order.id }}</strong> · Pay
        <strong>&#8377;{{ "%.2f"|format(order.total_amount) }}</strong> on delivery to
        <strong>{{ order.shipping_name }}</strong>
      </p>

      <!-- Items list -->
      <div class="text-start border rounded p-3 mb-4">
        <h6 class="fw-bold mb-3">Items Ordered</h6>
        {% for item in items %}
        <div class="d-flex justify-content-between align-items-center small py-2 border-bottom">
          <div class="d-flex gap-2 align-items-center">
            <img src="{{ item.products.image_url or 'https://placehold.co/40x40?text=?' }}"
                 class="rounded" style="width:40px;height:40px;object-fit:cover">
            <span>{{ item.products.name }} &times; {{ item.quantity }}</span>
          </div>
          <span class="fw-semibold">&#8377;{{ "%.2f"|format(item.price * item.quantity) }}</span>
        </div>
        {% endfor %}
        <div class="d-flex justify-content-between fw-bold mt-2 pt-1">
          <span>Total</span>
          <span>&#8377;{{ "%.2f"|format(order.total_amount) }}</span>
        </div>
      </div>

      <!-- Delivery address -->
      <div class="bg-light rounded p-3 mb-4 text-start small">
        <strong class="d-block mb-1">
          <i class="bi bi-geo-alt me-1"></i>Delivering To:
        </strong>
        {{ order.shipping_address }}<br>
        {{ order.shipping_city }}, {{ order.shipping_state }} – {{ order.shipping_pincode }}<br>
        <i class="bi bi-telephone me-1"></i>{{ order.shipping_phone }}
        {% if order.note %}
        <div class="mt-2 text-muted"><i class="bi bi-chat-left-dots me-1"></i>{{ order.note }}</div>
        {% endif %}
      </div>

      <!-- Payment badge -->
      <div class="alert alert-success py-2 mb-4">
        <i class="bi bi-cash-coin me-1"></i>
        <strong>Cash on Delivery</strong> — No payment needed now.
      </div>

      <!-- Actions -->
      <div class="d-flex gap-2 justify-content-center">
        <a href="{{ url_for('orders') }}" class="btn btn-outline-dark px-4">
          <i class="bi bi-bag me-1"></i>My Orders
        </a>
        <a href="{{ url_for('index') }}" class="btn btn-warning px-4 fw-semibold">
          Continue Shopping
        </a>
      </div>

    </div>
  </div>
</div>
{% endblock %}
