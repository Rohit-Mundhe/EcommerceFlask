{% extends "base.html" %}
{% block title %}My Orders â€“ ShopZone{% endblock %}
{% block content %}
<div class="container">
  <h1 class="page-title">ðŸ“¦ My Orders</h1>

  {% if orders %}
    {% for o in orders %}
    <div class="order-card">
      <div class="order-header">
        <div>
          <span class="order-id">Order #{{ o.id }}</span>
          <span class="order-date">{{ o.order_date[:10] if o.order_date else '' }}</span>
        </div>
        <div>
          <span class="status-badge status-{{ o.status }}">{{ o.status|title }}</span>
          <span class="order-total-badge">â‚¹{{ "%.2f"|format(o.total_amount or o.order_total or 0) }}</span>
        </div>
      </div>
      <div class="order-body">
        <div class="order-items-list">
          {% for item in o.items %}
          {% if item.products %}
          <div class="oi-row">
            <img src="{{ item.products.image_url or 'https://placehold.co/60x50?text=IMG' }}" class="oi-img"/>
            <div class="oi-info">
              <p class="oi-name">{{ item.products.name }}</p>
              <p class="oi-meta">Qty: {{ item.quantity }} &nbsp;Ã—&nbsp; â‚¹{{ "%.2f"|format(item.price or item.products.price) }}</p>
            </div>
          </div>
          {% endif %}
          {% endfor %}
        </div>
        <div class="order-meta">
          <p><strong>Payment:</strong> {{ o.payment_method or 'Cash on Delivery' }}</p>
          <p><strong>Deliver to:</strong> {{ o.shipping_name }}, {{ o.shipping_city }}</p>
          {% if o.note %}<p><strong>Note:</strong> {{ o.note }}</p>{% endif %}
        </div>
      </div>
    </div>
    {% endfor %}
  {% else %}
  <div class="empty-state">
    <div class="empty-icon">ðŸ“¦</div>
    <h3>No orders yet!</h3>
    <p>You haven't placed any orders yet.</p>
    <a href="{{ url_for('home') }}" class="btn btn-primary">Shop Now</a>
  </div>
  {% endif %}
</div>
{% endblock %}
